<% content_for :title, "Edit MVP Award - #{@participant.name}" %>

<div class="max-w-2xl mx-auto">
  <div class="mb-6">
    <%= link_to "â† Back to #{@participant.name}", edit_admin_participant_path(@participant), class: "text-blue-600 hover:underline" %>
  </div>

  <div class="bg-white rounded-lg shadow p-6">
    <h1 class="text-2xl font-bold text-gray-900 mb-6">Edit MVP Award for <%= @participant.name %></h1>

    <%= form_with model: [:admin, @participant, @mvp_award], class: "space-y-6" do |f| %>
      <% if @mvp_award.errors.any? %>
        <div class="mb-4 p-4 bg-red-50 border border-red-200 rounded">
          <ul class="list-disc list-inside text-red-600 text-sm">
            <% @mvp_award.errors.full_messages.each do |msg| %>
              <li><%= msg %></li>
            <% end %>
          </ul>
        </div>
      <% end %>

      <div>
        <%= f.label :year, class: "block text-sm font-medium text-gray-700" %>
        <%= f.number_field :year, 
            min: 2013, 
            max: Date.current.year + 1,
            class: "mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" %>
      </div>

      <div>
        <%= f.label :award_type, class: "block text-sm font-medium text-gray-700" %>
        <%= f.select :award_type,
            options_for_select(MvpAward::AWARD_TYPES, @mvp_award.award_type),
            {},
            { class: "mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" } %>
      </div>

      <div>
        <%= f.label :source_url, "Source URL (optional)", class: "block text-sm font-medium text-gray-700" %>
        <%= f.url_field :source_url,
            placeholder: "https://www.servicenow.com/community/...",
            class: "mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" %>
        <p class="mt-1 text-xs text-gray-500">Link to the official announcement page</p>

        <details class="mt-3 bg-gray-50 rounded-md border border-gray-200">
          <summary class="px-3 py-2 text-sm font-medium text-gray-700 cursor-pointer hover:bg-gray-100 rounded-md">
            Common MVP Sources (Historical)
          </summary>
          <div class="px-3 py-2 text-sm max-h-64 overflow-y-auto">
            <table class="w-full text-xs">
              <thead class="text-gray-500 border-b">
                <tr>
                  <th class="text-left py-1">Year</th>
                  <th class="text-left py-1">Award</th>
                </tr>
              </thead>
              <tbody class="divide-y divide-gray-100">
                <tr><td class="py-1">2026</td><td><a href="https://www.servicenow.com/community/in-other-news/announcing-our-2026-servicenow-mvps/ba-p/3493833" target="_blank" class="text-blue-600 hover:underline">Most Valued Professionals</a></td></tr>
                <tr><td class="py-1">2025</td><td><a href="https://www.servicenow.com/community/in-other-news/announcing-our-2025-servicenow-mvps/ba-p/3177209" target="_blank" class="text-blue-600 hover:underline">Top Contributor Program</a></td></tr>
                <tr><td class="py-1">2024</td><td><a href="https://www.servicenow.com/community/in-other-news/announcing-our-2024-servicenow-mvp-and-rising-star-awardees/ba-p/2812367/page/6" target="_blank" class="text-blue-600 hover:underline">Top Contributor Program</a></td></tr>
                <tr><td class="py-1">2023</td><td><a href="https://www.servicenow.com/community/in-other-news/announcing-our-2023-mvp-and-rising-star-awardees/ba-p/2457267" target="_blank" class="text-blue-600 hover:underline">Top Contributor Program</a></td></tr>
                <tr><td class="py-1">2023</td><td><a href="https://developer.servicenow.com/blog.do?p=/post/2023-mvp-announcement/" target="_blank" class="text-blue-600 hover:underline">Developer MVP</a></td></tr>
                <tr><td class="py-1">2022</td><td><a href="https://www.servicenow.com/community/in-other-news/announcing-our-2022-mvp-and-rising-stars/ba-p/2270403" target="_blank" class="text-blue-600 hover:underline">Top Contributor Program</a></td></tr>
                <tr><td class="py-1">2022</td><td><a href="https://developer.servicenow.com/blog.do?p=/post/2022-mvp-announcement/" target="_blank" class="text-blue-600 hover:underline">Developer MVP</a></td></tr>
                <tr><td class="py-1">2021</td><td><a href="https://www.servicenow.com/community/top-contributor-blog/congratulations-2021-now-community-mvp-awardees/ba-p/2288544" target="_blank" class="text-blue-600 hover:underline">Top Contributor Program</a></td></tr>
                <tr><td class="py-1">2021</td><td><a href="https://developer.servicenow.com/blog.do?p=/post/2021-developer-mvp-announcement/" target="_blank" class="text-blue-600 hover:underline">Developer MVP</a></td></tr>
                <tr><td class="py-1">2020</td><td><a href="https://www.servicenow.com/community/top-contributor-blog/congratulations-2020-now-community-mvp-awardees/ba-p/2288069" target="_blank" class="text-blue-600 hover:underline">Top Contributor Program</a></td></tr>
                <tr><td class="py-1">2020</td><td><a href="https://developer.servicenow.com/blog.do?p=/post/all-stars/" target="_blank" class="text-blue-600 hover:underline">Developer MVP</a></td></tr>
                <tr><td class="py-1">2019</td><td><a href="https://www.servicenow.com/community/top-contributor-blog/congratulations-2019-mvp-leader-awardees/ba-p/2287883" target="_blank" class="text-blue-600 hover:underline">Top Contributor Program</a></td></tr>
                <tr><td class="py-1">2018</td><td><a href="https://www.servicenow.com/community/top-contributor-blog/congratulations-2018-mvp-leader-awardees/ba-p/2288718" target="_blank" class="text-blue-600 hover:underline">Top Contributor Program</a></td></tr>
                <tr><td class="py-1">2016</td><td><span class="text-gray-400">Lost to Time</span></td></tr>
                <tr><td class="py-1">2015</td><td><a href="https://www.servicenow.com/community/top-contributor-blog/new-top-contributor-programs/ba-p/2288420" target="_blank" class="text-blue-600 hover:underline">Top Contributor Program</a></td></tr>
                <tr><td class="py-1">2013</td><td><a href="https://www.servicenow.com/community/developer-articles/from-the-archives-2013-member-of-the-month/ta-p/2306880" target="_blank" class="text-blue-600 hover:underline">Member of the Month</a></td></tr>
              </tbody>
            </table>
          </div>
        </details>
      </div>

      <div class="flex gap-4 pt-4">
        <%= f.submit "Update Award", class: "bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 cursor-pointer" %>
        <%= link_to "Cancel", edit_admin_participant_path(@participant), class: "px-4 py-2 text-gray-600 hover:text-gray-900" %>
      </div>
    <% end %>
  </div>
</div>
